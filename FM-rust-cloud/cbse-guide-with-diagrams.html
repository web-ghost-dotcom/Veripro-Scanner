<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>ARCHITECTURE_GUIDE</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>
  <style>
    body { max-width: 1200px; margin: 40px auto; padding: 0 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; }
    pre { background: #f5f5f5; padding: 15px; border-radius: 5px; overflow-x: auto; }
    code { background: #f0f0f0; padding: 2px 5px; border-radius: 3px; }
    .mermaid { text-align: center; margin: 20px 0; }
  </style>
</head>
<body>
<h1
id="cbse-architecture-guide-complete-blockchain-symbolic-execution">CBSE
Architecture Guide: Complete Blockchain Symbolic Execution</h1>
<h2 id="overview">Overview</h2>
<p>CBSE (Complete Blockchain Symbolic Executor) is a Rust-based symbolic
execution engine for Ethereum smart contracts. It analyzes Solidity code
by exploring all possible execution paths to find vulnerabilities,
assertion failures, and edge cases that traditional testing might
miss.</p>
<hr />
<h2 id="key-capabilities">Key Capabilities</h2>
<ul>
<li><strong>Symbolic Execution</strong>: Explores all code paths using
symbolic values instead of concrete inputs</li>
<li><strong>Automatic Bug Detection</strong>: Finds overflows,
underflows, assertion failures, and reverts</li>
<li><strong>Path Exploration</strong>: Discovers counterexamples that
violate invariants</li>
<li><strong>Dual Execution Modes</strong>: Run locally or offload to
remote cloud servers via SSH</li>
</ul>
<hr />
<h2 id="core-philosophy">Core Philosophy</h2>
<p><strong>Traditional Testing:</strong></p>
<pre><code>test(5) PASS  test(10) PASS  test(100) PASS  ... (limited coverage)</code></pre>
<p><strong>Symbolic Execution:</strong></p>
<pre><code>test(X) where X in [0, 2^256-1]  (complete coverage)</code></pre>
<hr />
<h2 id="execution-modes">Execution Modes</h2>
<h3 id="local-mode-default">1. Local Mode (Default)</h3>
<p>Execute everything on your local machine:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;test&quot;</span></span></code></pre></div>
<p><strong>Use Cases:</strong> - Development and debugging - Small to
medium contracts - Quick iteration cycles - No network latency
concerns</p>
<h3 id="ssh-cloud-mode">2. SSH Cloud Mode</h3>
<p>Compile locally, execute remotely:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--ssh</span> <span class="at">--ssh-host</span> node10@node10 <span class="at">--function</span> <span class="st">&quot;test&quot;</span></span></code></pre></div>
<p><strong>Use Cases:</strong> - Large contract suites requiring heavy
computation - Offloading Z3 solver work to powerful servers - Parallel
execution across multiple nodes (future) - Resource-constrained local
machines</p>
<hr />
<h2 id="system-architecture-overview">System Architecture Overview</h2>
<pre class="mermaid"><code>graph TD
    A[&quot;Solidity Code
    .sol files&quot;]
    A --&gt; B[&quot;PHASE 1: COMPILATION
    Always happens locally&quot;]
    B --&gt; C[&quot;cbse-build
    Forge Integration&quot;]
    C --&gt; D[&quot;Build Artifact
    • Bytecode
    • ABI
    • Storage
    • Metadata&quot;]
    
    D --&gt; E{Execution Mode?}
    
    E --&gt;|Local| L1[LOCAL EXECUTION]
    E --&gt;|SSH| S1[SSH CLOUD MODE]
    
    S1 --&gt; S2[&quot;cbse-remote
    SSH Upload&quot;]
    S2 --&gt; S3[&quot;Remote Server
    Worker Mode&quot;]
    
    L1 --&gt; P2[&quot;PHASE 2:
    SYMBOLIC EXECUTION&quot;]
    S3 --&gt; P2
    
    P2 --&gt; J[&quot;cbse-sevm
    Symbolic EVM&quot;]
    J --&gt; K[&quot;Path Exploration
    • Fork on branch
    • Track paths
    • Collect traces&quot;]
    K --&gt; L[&quot;cbse-solver Z3
    Constraint Solving&quot;]
    L --&gt; M[&quot;Test Results
    • Pass/Fail
    • Traces
    • Counterexample&quot;]
    
    M --&gt; N1{Mode?}
    N1 --&gt;|Local| N2[&quot;Display Locally
    cbse-ui&quot;]
    N1 --&gt;|SSH| N3[&quot;Download Results
    cbse-remote&quot;]
    N3 --&gt; N2
    
    style A fill:#e1f5ff
    style D fill:#fff4e1
    style P2 fill:#ffe1f5
    style M fill:#e1ffe1
    style N2 fill:#f0f0f0
</code></pre>
<hr />
<h2 id="execution-flow">Execution Flow</h2>
<h3 id="phase-1-compilation-always-local">Phase 1: Compilation (Always
Local)</h3>
<pre class="mermaid"><code>graph TD
    U[&quot;User runs: cbse --function test&quot;]
    U --&gt; C1[&quot;cbse-config
    Parse CLI arguments&quot;]
    C1 --&gt; B1[&quot;cbse-build executes
    forge build --ast
    --extra-output storageLayout&quot;]
    B1 --&gt; F1[&quot;Forge compiles
    Solidity contracts&quot;]
    F1 --&gt; F2[&quot;test/Counter.t.sol to
    out/Counter.t.sol/CounterTest.json&quot;]
    F2 --&gt; F3[&quot;src/Counter.sol to
    out/Counter.sol/Counter.json&quot;]
    F3 --&gt; P1[&quot;cbse-build parses
    JSON artifacts&quot;]
    P1 --&gt; A1[&quot;BuildArtifacts struct
    • abi: Array
    • bytecode: Hex
    • deployedBytecode: Hex
    • storageLayout: Object
    • metadata: Object&quot;]
    
    style U fill:#e1f5ff
    style A1 fill:#e1ffe1
</code></pre>
<hr />
<h3 id="phase-2a-local-execution-flow">Phase 2A: Local Execution
Flow</h3>
<pre class="mermaid"><code>graph TD
    START[Start Local Execution]
    START --&gt; INIT[Initialize SEVM; • Create Z3 context; • Create initial State; • Load bytecode]
    
    INIT --&gt; DEPLOY1[Deploy Test Contract; • Create symbolic address; • Store bytecode; • Setup environment]
    
    DEPLOY1 --&gt; DEPLOY2[Deploy Target Contracts; • Deploy Counter.sol; • Run constructor; • Store bytecode]
    
    DEPLOY2 --&gt; BUILD[Build Function Call; • Calculate selector; • Encode symbolic args; • Create calldata]
    
    BUILD --&gt; EXEC[Execute Test Function; Start SEVM Loop]
    
    EXEC --&gt; OP1[OPCODE: PUSH1 0x80; Create symbolic value; Push to stack]
    
    OP1 --&gt; OP2[OPCODE: MSTORE; Update memory offset]
    
    OP2 --&gt; OP3[OPCODE: CALLDATALOAD; Load symbolic x from calldata]
    
    OP3 --&gt; OP4[OPCODE: SSTORE; Storage contract 0 = symbolic x]
    
    OP4 --&gt; BRANCH{OPCODE: JUMPI; Conditional Branch?}
    
    BRANCH --&gt;|True| PATH1[Path 1:; branch_condition == true; Add constraint]
    BRANCH --&gt;|False| PATH2[Path 2:; branch_condition == false; Add constraint]
    
    PATH1 --&gt; SAT1{Z3 SAT Check; Path 1}
    PATH2 --&gt; SAT2{Z3 SAT Check; Path 2}
    
    SAT1 --&gt;|SAT| CONT1[Continue; Execution Path 1]
    SAT1 --&gt;|UNSAT| PRUNE1[Prune Path 1; Infeasible]
    
    SAT2 --&gt;|SAT| CONT2[Continue; Execution Path 2]
    SAT2 --&gt;|UNSAT| PRUNE2[Prune Path 2; Infeasible]
    
    CONT1 --&gt; CHECK1{Assertion/Revert?}
    CONT2 --&gt; CHECK2{Assertion/Revert?}
    
    CHECK1 --&gt;|Yes| FAIL1[REVERT Detected; Record trace; Extract counterexample]
    CHECK1 --&gt;|No| PASS1[Continue to completion]
    
    CHECK2 --&gt;|Yes| FAIL2[REVERT Detected; Record trace; Extract counterexample]
    CHECK2 --&gt;|No| PASS2[Continue to completion]
    
    FAIL1 --&gt; RESULT[Aggregate Test Results]
    FAIL2 --&gt; RESULT
    PASS1 --&gt; RESULT
    PASS2 --&gt; RESULT
    PRUNE1 --&gt; RESULT
    PRUNE2 --&gt; RESULT
    
    RESULT --&gt; UI[Display in Terminal; cbse-ui; • Passed tests; • Failed tests; • Counterexamples]
    
    style START fill:#e1f5ff
    style BRANCH fill:#ffe1e1
    style SAT1 fill:#fff4e1
    style SAT2 fill:#fff4e1
    style FAIL1 fill:#ffcccc
    style FAIL2 fill:#ffcccc
    style UI fill:#e1ffe1
</code></pre>
<hr />
<h3 id="phase-2b-ssh-cloud-execution-flow">Phase 2B: SSH Cloud Execution
Flow</h3>
<pre class="mermaid"><code>graph TD
    START[User runs: cbse --ssh; --ssh-host user@server; --function test]
    
    START --&gt; LOCAL1[LOCAL: Compilation; Steps 1-3 same as local mode]
    
    LOCAL1 --&gt; LOCAL2[LOCAL: cbse-remote; Create JobArtifact]
    
    LOCAL2 --&gt; JOB[JobArtifact Structure:; • contracts array; • config object; • job_id uuid; • timestamp]
    
    JOB --&gt; SERIAL[Serialize to; artifact.json]
    
    SERIAL --&gt; CONN[LOCAL: Establish; SSH Connection; • Prompt for password; • TCP connection; • Authentication]
    
    CONN --&gt; UPLOAD[LOCAL: SFTP Upload; artifact.json →; /tmp/cbse-jobs/uuid/]
    
    UPLOAD --&gt; EXEC[LOCAL: Execute; Remote Command; /usr/local/bin/cbse; --worker-mode; --input artifact.json; --output result.json]
    
    EXEC --&gt; REMOTE1[REMOTE: Worker Mode Starts]
    
    REMOTE1 --&gt; REMOTE2[REMOTE: Deserialize; artifact.json]
    
    REMOTE2 --&gt; REMOTE3[REMOTE: Initialize; Z3 Context]
    
    REMOTE3 --&gt; REMOTE4[REMOTE: Execute Tests; Same as Local Phase 2A; Steps 2-4]
    
    REMOTE4 --&gt; REMOTE5[REMOTE: Symbolic; Execution Loop; • Deploy contracts; • Execute functions; • Fork paths; • Check constraints; • Collect results]
    
    REMOTE5 --&gt; REMOTE6[REMOTE: Serialize Results; to result.json]
    
    REMOTE6 --&gt; RESULT[Result JSON:; • tests array; • passed boolean; • traces; • counterexamples; • summary]
    
    RESULT --&gt; EXIT[REMOTE: Exit Worker; Code 0 pass or 1 fail]
    
    EXIT --&gt; DOWNLOAD[LOCAL: SFTP Download; result.json from; /tmp/cbse-jobs/uuid/]
    
    DOWNLOAD --&gt; CLEANUP[LOCAL: Remote Cleanup; rm -rf /tmp/cbse-jobs/uuid/]
    
    CLEANUP --&gt; PARSE[LOCAL: Parse; result.json]
    
    PARSE --&gt; DISPLAY[LOCAL: Display Results; cbse-ui; Same as local mode]
    
    style START fill:#e1f5ff
    style LOCAL1 fill:#e1f5ff
    style LOCAL2 fill:#e1f5ff
    style CONN fill:#fff4e1
    style UPLOAD fill:#ffe1f5
    style REMOTE1 fill:#ffe1e1
    style REMOTE2 fill:#ffe1e1
    style REMOTE3 fill:#ffe1e1
    style REMOTE4 fill:#ffe1e1
    style REMOTE5 fill:#ffe1e1
    style REMOTE6 fill:#ffe1e1
    style DOWNLOAD fill:#ffe1f5
    style DISPLAY fill:#e1ffe1
</code></pre>
<hr />
<h2 id="data-flow-diagrams">Data Flow Diagrams</h2>
<h3 id="local-mode-data-flow-vertical">Local Mode Data Flow
(Vertical)</h3>
<pre class="mermaid"><code>graph TD
    A[Solidity Source Files; .sol]
    
    A --&gt;|cbse-build| B[BuildArtifacts]
    
    B1[BuildArtifacts Contents:; • bytecode: Vec u8; • abi: Vec AbiItem; • storage: StorageLayout]
    B --&gt; B1
    
    B1 --&gt;|main.rs| C[Iterate Each Test Function]
    
    C --&gt;|cbse-sevm| D[SEVM Initialization]
    
    D1[SEVM Components:; • Context Z3; • State stack, memory, storage; • Contract bytecode]
    D --&gt; D1
    
    D1 --&gt;|cbse-calldata| E[Build Function Call]
    
    E1[Function Call:; • selector: u8; 4; • args: Vec CbseBitVec]
    E --&gt; E1
    
    E1 --&gt;|cbse-sevm opcodes| F[Execution Loop]
    
    F --&gt; G{Conditional Branch?}
    
    G --&gt;|Yes| H[Path 1; Constraints:; Vec Z3Bool]
    G --&gt;|Yes| I[Path 2; Constraints:; Vec Z3Bool]
    G --&gt;|No| J[Continue Single Path]
    
    H --&gt;|cbse-solver| K{SAT Check Path 1}
    I --&gt;|cbse-solver| L{SAT Check Path 2}
    J --&gt;|cbse-solver| M{SAT Check}
    
    K --&gt;|SAT| N[Continue Path 1]
    K --&gt;|UNSAT| O[Prune Path 1]
    
    L --&gt;|SAT| P[Continue Path 2]
    L --&gt;|UNSAT| Q[Prune Path 2]
    
    M --&gt;|SAT| R[Continue]
    M --&gt;|UNSAT| S[Prune]
    
    N --&gt;|cbse-traces| T[Trace Recording]
    P --&gt;|cbse-traces| T
    R --&gt;|cbse-traces| T
    
    T1[Trace Events:; • CALL; • SLOAD; • SSTORE; • REVERT]
    T --&gt; T1
    
    T1 --&gt;|main.rs| U[TestResult]
    
    U1[TestResult:; • passed: bool; • trace: String; • counterexample: Option Model]
    U --&gt; U1
    
    U1 --&gt;|cbse-ui| V[Terminal Output; Formatted Display]
    
    style A fill:#e1f5ff
    style B1 fill:#fff4e1
    style D1 fill:#ffe1f5
    style E1 fill:#e1ffe1
    style G fill:#ffcccc
    style K fill:#fff4e1
    style L fill:#fff4e1
    style M fill:#fff4e1
    style T1 fill:#e1f5ff
    style U1 fill:#ffe1e1
    style V fill:#e1ffe1
</code></pre>
<hr />
<h3 id="ssh-cloud-mode-data-flow-vertical">SSH Cloud Mode Data Flow
(Vertical)</h3>
<pre class="mermaid"><code>graph TD
    subgraph LOCAL[&quot; &quot;]
        A[Solidity Source; Local Machine]
        A --&gt; B[cbse-build; Compilation]
        B --&gt; C[BuildArtifacts; Local]
        C --&gt; D[cbse-remote; Job Creation]
        D --&gt; E[JobArtifact Object; • contracts; • config; • metadata]
        E --&gt; F[Serialize to; artifact.json]
        F --&gt; G[SFTP Upload; SSH Connection]
    end
    
    G -.Transfer.-&gt; H
    
    subgraph REMOTE[&quot; &quot;]
        H[artifact.json; Remote Server]
        H --&gt; I[cbse --worker-mode; Deserialize]
        I --&gt; J[Initialize; Z3 Context]
        J --&gt; K[cbse-sevm; Execution Loop]
        K --&gt; L[Path Exploration; Fork &amp; Track]
        L --&gt; M[cbse-solver; Constraint Solving]
        M --&gt; N[Collect Results; Traces &amp; Counterexamples]
        N --&gt; O[Serialize to; result.json]
    end
    
    O -.Transfer.-&gt; P
    
    subgraph LOCAL2[&quot; &quot;]
        P[SFTP Download; result.json]
        P --&gt; Q[JobResult Object; Local Machine]
        Q --&gt; R[Parse Results; Test Outcomes]
        R --&gt; S[cbse-ui; Terminal Display]
        S --&gt; T[Formatted Output; • Passed Tests; • Failed Tests; • Counterexamples; • Summary]
    end
    
    style A fill:#e1f5ff
    style C fill:#fff4e1
    style E fill:#ffe1f5
    style G fill:#ffcccc
    style H fill:#ffe1e1
    style K fill:#ffe1e1
    style M fill:#ffe1e1
    style O fill:#ffcccc
    style P fill:#e1ffe1
    style S fill:#e1f5ff
    style T fill:#ccffcc
</code></pre>
<hr />
<h2 id="worker-mode-json-structure">Worker Mode JSON Structure</h2>
<h3 id="artifact.json-uploaded-to-remote">artifact.json (Uploaded to
Remote)</h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;contracts&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Counter&quot;</span><span class="fu">,</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;bytecode&quot;</span><span class="fu">:</span> <span class="st">&quot;0x608060405234801561001057600080fd5b50...&quot;</span><span class="fu">,</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;abi&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;function&quot;</span><span class="fu">,</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;increment&quot;</span><span class="fu">,</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;inputs&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;outputs&quot;</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;test_functions&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;test_Increment&quot;</span><span class="ot">,</span> <span class="st">&quot;testFuzz_SetNumber&quot;</span><span class="ot">]</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;verbosity&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;debug&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;print_setup_states&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;print_traces&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;solver_timeout_ms&quot;</span><span class="fu">:</span> <span class="dv">30000</span><span class="fu">,</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;solver_max_memory&quot;</span><span class="fu">:</span> <span class="dv">8192</span><span class="fu">,</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;loop_bound&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;width_bound&quot;</span><span class="fu">:</span> <span class="dv">5</span><span class="fu">,</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;depth_bound&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;array_lengths&quot;</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;symbolic_storage&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;symbolic_msg_sender&quot;</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;job_id&quot;</span><span class="fu">:</span> <span class="st">&quot;a1b2c3d4-e5f6-7890-abcd-ef1234567890&quot;</span><span class="fu">,</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-11-07T10:30:15Z&quot;</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="result.json-downloaded-from-remote">result.json (Downloaded from
Remote)</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;tests&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;CounterTest::test_Increment()&quot;</span><span class="fu">,</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;passed&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;gas_used&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;return_data&quot;</span><span class="fu">:</span> <span class="st">&quot;&quot;</span><span class="fu">,</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;trace&quot;</span><span class="fu">:</span> <span class="st">&quot;CALL 0xabcd1234::0x273a7c12() (caller: 0x12345678)</span><span class="ch">\n</span><span class="st">↩ RETURN 0x&quot;</span><span class="fu">,</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;counterexample&quot;</span><span class="fu">:</span> <span class="kw">null</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;CounterTest::testFuzz_SetNumber(uint256)&quot;</span><span class="fu">,</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;passed&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;gas_used&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;return_data&quot;</span><span class="fu">:</span> <span class="st">&quot;0x4e487b71...&quot;</span><span class="fu">,</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;trace&quot;</span><span class="fu">:</span> <span class="st">&quot;CALL 0xabcd1234::0xabc12345() (caller: 0x12345678)</span><span class="ch">\n</span><span class="st">↩ REVERT 0x4e487b71...&quot;</span><span class="fu">,</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;counterexample&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;x&quot;</span><span class="fu">:</span> <span class="st">&quot;115792089237316195423570985008687907853269984665640564039457584007913129639935&quot;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;summary&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;total&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;passed&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;failed&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;execution_time_ms&quot;</span><span class="fu">:</span> <span class="dv">4523</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="user-guide">User Guide</h2>
<h3 id="installation">Installation</h3>
<h4 id="prerequisites">Prerequisites</h4>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Rust</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">--proto</span> <span class="st">&#39;=https&#39;</span> <span class="at">--tlsv1.2</span> <span class="at">-sSf</span> https://sh.rustup.rs <span class="kw">|</span> <span class="fu">sh</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Foundry (for Forge)</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-L</span> https://foundry.paradigm.xyz <span class="kw">|</span> <span class="fu">bash</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="ex">foundryup</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Z3 SMT Solver</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># macOS:</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install z3</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Ubuntu/Debian:</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install z3 libz3-dev</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Fedora:</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> dnf install z3 z3-devel</span></code></pre></div>
<h4 id="build-cbse">Build CBSE</h4>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/leojay-net/FM-Rust-Cloud.git</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> FM-rust-cloud</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="ex">cargo</span> build <span class="at">--release</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="ex">cargo</span> install <span class="at">--path</span> crates/cbse</span></code></pre></div>
<hr />
<h3 id="local-execution">Local Execution</h3>
<h4 id="basic-usage">Basic Usage</h4>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Navigate to your Foundry project</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> my-project</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run all tests</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;test&quot;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Run specific test</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;testFuzz_SetNumber&quot;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Run with verbose output</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;test&quot;</span> <span class="at">-vvv</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Run with debugging</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;test&quot;</span> <span class="at">--debug</span> <span class="at">--print-traces</span></span></code></pre></div>
<h4 id="configuration-options">Configuration Options</h4>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Solver settings</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;test&quot;</span> <span class="dt">\</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--solver-timeout-ms</span> 60000 <span class="dt">\</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--solver-max-memory</span> 16384</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Exploration bounds</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;test&quot;</span> <span class="dt">\</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">--loop</span> 5 <span class="dt">\</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">--width</span> 10 <span class="dt">\</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--depth</span> 200</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Symbolic configuration</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;test&quot;</span> <span class="dt">\</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">--symbolic-storage</span> <span class="dt">\</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">--symbolic-msg-sender</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Array lengths</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--function</span> <span class="st">&quot;test&quot;</span> <span class="dt">\</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">--array-lengths</span> <span class="st">&quot;MyArray=5,OtherArray=10&quot;</span></span></code></pre></div>
<hr />
<h3 id="ssh-cloud-execution">SSH Cloud Execution</h3>
<h4 id="setup-remote-server">Setup Remote Server</h4>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. SSH into your remote server</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> user@remote-server</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Install dependencies</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> build-essential pkg-config libssl-dev z3 libz3-dev clang</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Install Rust</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">--proto</span> <span class="st">&#39;=https&#39;</span> <span class="at">--tlsv1.2</span> <span class="at">-sSf</span> https://sh.rustup.rs <span class="kw">|</span> <span class="fu">sh</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> <span class="va">$HOME</span>/.cargo/env</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Clone and install CBSE</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/leojay-net/FM-Rust-Cloud.git</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> FM-rust-cloud</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="ex">cargo</span> install <span class="at">--path</span> crates/cbse</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Create symlink (optional)</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> ~/.cargo/bin/cbse /usr/local/bin/cbse</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 6. Verify installation</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--version</span></span></code></pre></div>
<h4 id="run-tests-on-remote-server">Run Tests on Remote Server</h4>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># From your local machine</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> my-project</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run on remote server</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--ssh</span> <span class="at">--ssh-host</span> user@remote-server <span class="at">--function</span> <span class="st">&quot;test&quot;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># With custom port</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--ssh</span> <span class="at">--ssh-host</span> user@remote-server <span class="at">--ssh-port</span> 2222 <span class="at">--function</span> <span class="st">&quot;test&quot;</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># With verbose output</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--ssh</span> <span class="at">--ssh-host</span> user@remote-server <span class="at">--function</span> <span class="st">&quot;test&quot;</span> <span class="at">-vvv</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co"># All configuration options work with SSH</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="ex">cbse</span> <span class="at">--ssh</span> <span class="at">--ssh-host</span> user@remote-server <span class="dt">\</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">--function</span> <span class="st">&quot;test&quot;</span> <span class="dt">\</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">--solver-timeout-ms</span> 120000 <span class="dt">\</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">--loop</span> 10 <span class="dt">\</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">--debug</span></span></code></pre></div>
<hr />
<h3 id="how-ssh-mode-works-step-by-step">How SSH Mode Works (Step by
Step)</h3>
<pre class="mermaid"><code>graph TD
    S1[Step 1:; Local Compilation; Forge builds contracts]
    S1 --&gt; S2[Step 2:; Artifact Upload; SFTP transfer bytecode + config]
    S2 --&gt; S3[Step 3:; Remote Execution; CBSE runs symbolic analysis]
    S3 --&gt; S4[Step 4:; Result Download; SFTP transfer results back]
    S4 --&gt; S5[Step 5:; Cleanup; Remove temp files from remote]
    S5 --&gt; S6[Step 6:; Display Results; Show in local terminal]
    
    style S1 fill:#e1f5ff
    style S2 fill:#ffe1f5
    style S3 fill:#ffe1e1
    style S4 fill:#e1ffe1
    style S5 fill:#fff4e1
    style S6 fill:#ccffcc
</code></pre>
<p><strong>Advantages:</strong> - No need to sync source code to remote
- No need to install Forge on remote - Only bytecode is transferred
(small payload) - Full config control from local CLI - Results displayed
locally with same UI</p>
<hr />
<h3 id="monitoring-remote-execution">Monitoring Remote Execution</h3>
<p>On the remote server, you can monitor CBSE execution:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Monitor active processes</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 1 <span class="st">&#39;ps aux | grep cbse&#39;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Monitor job directories</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 1 <span class="st">&#39;ls -lh /tmp/cbse-jobs/&#39;</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># View logs (if CBSE is verbose)</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-f</span> /tmp/cbse-jobs/<span class="pp">*</span>/output.log</span></code></pre></div>
<hr />
<h2 id="example-workflow-finding-a-bug-in-simplevault">Example Workflow:
Finding a Bug in SimpleVault</h2>
<h3 id="contract-code">Contract Code</h3>
<pre class="solidity"><code>// src/SimpleVault.sol
contract SimpleVault {
    mapping(address =&gt; uint256) public balances;

    function deposit() external payable {
        balances[msg.sender] += msg.value;
    }

    function withdraw(uint256 amount) external {
        require(balances[msg.sender] &gt;= amount, &quot;Insufficient balance&quot;);
        balances[msg.sender] -= amount;  // BUG: Should happen AFTER transfer
        payable(msg.sender).transfer(amount);
    }
}</code></pre>
<h3 id="test-code">Test Code</h3>
<pre class="solidity"><code>// test/SimpleVault.t.sol
contract SimpleVaultTest is Test {
    SimpleVault vault;

    function setUp() public {
        vault = new SimpleVault();
    }

    function testWithdraw(uint256 depositAmount, uint256 withdrawAmount) public {
        vm.assume(depositAmount &gt; 0);
        vm.assume(withdrawAmount &gt; 0);
        
        vault.deposit{value: depositAmount}();
        vault.withdraw(withdrawAmount);
        
        // This should hold, but CBSE will find a counterexample
        assert(address(vault).balance &gt;= 0);
    }
}</code></pre>
<hr />
<h3 id="local-execution-output">Local Execution Output</h3>
<pre><code>$ cbse --function &quot;testWithdraw&quot; -vvv

   ╔═══════════════════════════════════════════╗
   ║  CBSE - Complete Blockchain Symbolic     ║
   ║         Executor (Rust Edition)           ║
   ╚═══════════════════════════════════════════╝

  Executing testWithdraw(uint256,uint256)
    
    ✗ Counterexample found!
    
    Symbolic inputs:
      depositAmount = 100
      withdrawAmount = 200
    
    Trace:
    CALL SimpleVault::deposit() value=100
      SSTORE balances[caller] = 100
    ↩ RETURN
    
    CALL SimpleVault::withdraw(200)
      SLOAD balances[caller] → 100
      ✓ require(100 &gt;= 200)  ← FAILS
    ↩ REVERT &quot;Insufficient balance&quot;

Summary: 1 test, 0 passed, 1 failed</code></pre>
<hr />
<h3 id="ssh-execution-output-same-contract">SSH Execution Output (Same
Contract)</h3>
<pre><code>$ cbse --ssh --ssh-host compute-node --function &quot;testWithdraw&quot; -vvv

Running in SSH mode (remote execution)
Enter SSH password: ****
🔌 Connecting to compute-node:22...
✅ SSH connection established
📤 Uploading artifacts...
⚙️  Executing CBSE on remote node...

📋 Remote output:
   ╔═══════════════════════════════════════════╗
   ║  CBSE - Complete Blockchain Symbolic     ║
   ║         Executor (Rust Edition)           ║
   ╚═══════════════════════════════════════════╝

  Executing testWithdraw(uint256,uint256)
    
    ✗ Counterexample found!
    
    Symbolic inputs:
      depositAmount = 100
      withdrawAmount = 200
    
    [... same trace as local ...]

📥 Downloading results...
✅ Remote execution complete in 3.45s

Summary: 1 test, 0 passed, 1 failed</code></pre>
<p><strong>Identical results!</strong> The only difference is where Z3
solver runs.</p>
<hr />
<h2 id="summary">Summary</h2>
<p>CBSE provides two execution modes for Ethereum symbolic
execution:</p>
<h3 id="local-mode">Local Mode</h3>
<ul>
<li><strong>Best for</strong>: Development, debugging, small
contracts</li>
<li><strong>Requires</strong>: Rust, Forge, Z3</li>
<li><strong>Runs</strong>: Everything on your machine</li>
</ul>
<h3 id="ssh-cloud-mode-1">SSH Cloud Mode</h3>
<ul>
<li><strong>Best for</strong>: CI/CD, large contracts, resource-limited
local machines</li>
<li><strong>Requires</strong>: Rust + Forge locally, CBSE + Z3 on
remote</li>
<li><strong>Runs</strong>: Compile locally, execute remotely</li>
</ul>
<p>This design allows local-first development with optional cloud
offloading for heavy workloads.</p>
<hr />
</body>
</html>
